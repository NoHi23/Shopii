{"ast":null,"code":"var _jsxFileName = \"D:\\\\SU25\\\\SDN302 - HOANNN\\\\Shopii-Template\\\\front-end\\\\src\\\\pages\\\\PaymentResult\\\\PaymentResult.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { resetPayment, checkPaymentStatus, cancelPaymentPolling } from '../../features/payment/paymentSlice';\nimport { motion } from 'framer-motion';\nimport { Box, Container, Typography, Button, Paper, CircularProgress, Divider } from \"@mui/material\";\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport CancelOutlinedIcon from '@mui/icons-material/CancelOutlined';\nimport HomeIcon from '@mui/icons-material/Home';\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaymentResult = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    token\n  } = useSelector(state => state.auth);\n  const [countDown, setCountDown] = useState(5);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [paymentResult, setPaymentResult] = useState({\n    status: '',\n    orderId: '',\n    message: ''\n  });\n\n  // Get query parameters from URL\n  const query = new URLSearchParams(location.search);\n  const queryStatus = query.get('status');\n  const queryOrderId = query.get('orderId') || query.get('orderCode');\n  const queryMessage = query.get('message');\n  const locationState = location.state || {};\n\n  // Check PayOS specific status\n  const payosStatus = query.get('status'); // PAID, CANCELLED, etc.\n\n  // Check if payment was already completed via sessionStorage\n  useEffect(() => {\n    const orderId = locationState.orderId || queryOrderId;\n    if (orderId) {\n      const paymentCompleted = sessionStorage.getItem(`payment_${orderId}_completed`);\n      if (paymentCompleted === 'true') {\n        console.log(`Payment ${orderId} was already completed, redirecting to home`);\n        dispatch(cancelPaymentPolling());\n        toast.success(\"Payment was already completed successfully!\");\n        navigate('/', {\n          replace: true\n        });\n      }\n    }\n  }, [locationState.orderId, queryOrderId, dispatch, navigate]);\n\n  // Ưu tiên sử dụng location state trước, sau đó là query params\n  useEffect(() => {\n    const getStatusInfo = async () => {\n      setIsVerifying(true);\n\n      // Sử dụng thông tin từ URL hoặc state\n      let finalStatus = locationState.status || queryStatus;\n      const orderId = locationState.orderId || queryOrderId;\n      const message = locationState.message || queryMessage;\n      console.log('Initial payment status info:', {\n        finalStatus,\n        orderId,\n        payosStatus\n      });\n\n      // Check if payment is already completed\n      if (orderId) {\n        const paymentCompleted = sessionStorage.getItem(`payment_${orderId}_completed`);\n        if (paymentCompleted === 'true') {\n          console.log(`Payment ${orderId} is already marked as completed`);\n          finalStatus = 'paid';\n          setIsVerifying(false);\n          setPaymentResult({\n            status: 'paid',\n            orderId: orderId || '',\n            message: \"Payment was already completed successfully!\"\n          });\n          return;\n        }\n      }\n\n      // Đối với PayOS, chúng ta cần dịch trạng thái\n      if (payosStatus === 'PAID' || payosStatus === 'SUCCESS' || payosStatus === '00') {\n        console.log('PayOS status indicates payment success');\n        finalStatus = 'paid';\n\n        // Mark the payment as completed in session storage\n        if (orderId) {\n          sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n        }\n      } else if (payosStatus === 'CANCELLED' || payosStatus === 'FAILED') {\n        console.log('PayOS status indicates payment failure');\n        finalStatus = 'failed';\n      }\n\n      // Nếu có orderId nhưng không có status rõ ràng, kiểm tra với API\n      if (orderId && (!finalStatus || finalStatus === 'pending')) {\n        console.log('Need to verify payment status with API for order:', orderId);\n        try {\n          if (token) {\n            const resultAction = await dispatch(checkPaymentStatus(orderId));\n            if (checkPaymentStatus.fulfilled.match(resultAction)) {\n              var _data$payment;\n              const data = resultAction.payload;\n              const paymentStatus = data === null || data === void 0 ? void 0 : (_data$payment = data.payment) === null || _data$payment === void 0 ? void 0 : _data$payment.status;\n              console.log('API payment status check result:', paymentStatus);\n\n              // Chỉ dựa vào trạng thái thanh toán\n              if (paymentStatus === 'paid') {\n                finalStatus = 'paid';\n                // Mark as completed\n                sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n              } else if (paymentStatus === 'failed') {\n                finalStatus = 'failed';\n              }\n            } else {\n              console.error('Failed to check payment status:', resultAction.error);\n            }\n          }\n        } catch (error) {\n          console.error('Error verifying payment:', error);\n        }\n      }\n      console.log('Final payment status determined:', finalStatus);\n\n      // Set final result\n      setPaymentResult({\n        status: finalStatus || 'unknown',\n        orderId: orderId || '',\n        message: message || ''\n      });\n      setIsVerifying(false);\n    };\n    getStatusInfo();\n\n    // Reset payment state in Redux\n    dispatch(resetPayment());\n  }, [dispatch, locationState, queryStatus, queryOrderId, queryMessage, payosStatus, token]);\n\n  // Stop any polling immediately when landing on this page\n  useEffect(() => {\n    console.log('Payment result page loaded, ensuring all polling is stopped');\n    dispatch(cancelPaymentPolling());\n\n    // Mark this payment as completed in sessionStorage\n    const orderId = locationState.orderId || queryOrderId;\n    if (orderId && paymentResult.status === 'paid') {\n      console.log(`Marking payment ${orderId} as completed`);\n      sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n    }\n  }, [dispatch, locationState.orderId, queryOrderId, paymentResult.status]);\n\n  // Show toast and start countdown after verification\n  useEffect(() => {\n    if (isVerifying) return;\n\n    // Show toast based on status\n    if (paymentResult.status === 'paid') {\n      toast.success('Thanh toán thành công!');\n    } else if (paymentResult.status === 'failed') {\n      toast.error('Thanh toán thất bại!');\n    } else {\n      toast.error(paymentResult.message || 'Đã xảy ra lỗi trong quá trình thanh toán.');\n    }\n    let timer;\n    // Start countdown to redirect to home\n    if (countDown > 0) {\n      timer = setInterval(() => {\n        setCountDown(prev => {\n          if (prev <= 1) {\n            clearInterval(timer);\n            navigate('/');\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    }\n\n    // Cleanup function to clear the timer when component unmounts\n    return () => {\n      if (timer) {\n        console.log('Clearing redirect timer');\n        clearInterval(timer);\n      }\n    };\n  }, [isVerifying, paymentResult, navigate, countDown]);\n\n  // Add another effect to force navigation when leaving the page\n  useEffect(() => {\n    const handleBeforeUnload = () => {\n      // Force cancel any pending operations\n      dispatch(resetPayment());\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      dispatch(resetPayment());\n    };\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    sx: {\n      py: 6\n    },\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        y: 20\n      },\n      animate: {\n        opacity: 1,\n        y: 0\n      },\n      transition: {\n        duration: 0.5\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          p: {\n            xs: 4,\n            md: 6\n          },\n          borderRadius: 2,\n          textAlign: 'center',\n          boxShadow: '0 10px 30px rgba(0,0,0,0.1)'\n        },\n        children: [isVerifying ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            py: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 60,\n            sx: {\n              mb: 3,\n              color: '#0F52BA'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            fontWeight: 600,\n            children: \"\\u0110ang x\\xE1c minh thanh to\\xE1n...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this) : paymentResult.status === 'paid' ? /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            scale: 0.8\n          },\n          animate: {\n            scale: 1\n          },\n          transition: {\n            type: \"spring\",\n            stiffness: 200,\n            damping: 15\n          },\n          children: [/*#__PURE__*/_jsxDEV(CheckCircleOutlineIcon, {\n            sx: {\n              fontSize: 100,\n              color: '#4CAF50',\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            fontWeight: 700,\n            gutterBottom: true,\n            children: \"Thanh to\\xE1n th\\xE0nh c\\xF4ng!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), paymentResult.orderId && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              color: \"text.secondary\",\n              gutterBottom: true,\n              children: \"M\\xE3 \\u0111\\u01A1n h\\xE0ng:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              fontWeight: 600,\n              sx: {\n                color: '#0F52BA'\n              },\n              children: paymentResult.orderId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 3,\n              backgroundColor: 'rgba(76, 175, 80, 0.1)',\n              borderRadius: 2,\n              maxWidth: 400,\n              mx: 'auto',\n              mb: 4\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: \"C\\u1EA3m \\u01A1n b\\u1EA1n \\u0111\\xE3 mua h\\xE0ng! \\u0110\\u01A1n h\\xE0ng c\\u1EE7a b\\u1EA1n \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c x\\u1EED l\\xFD th\\xE0nh c\\xF4ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            scale: 0.8\n          },\n          animate: {\n            scale: 1\n          },\n          transition: {\n            type: \"spring\",\n            stiffness: 200,\n            damping: 15\n          },\n          children: [/*#__PURE__*/_jsxDEV(CancelOutlinedIcon, {\n            sx: {\n              fontSize: 100,\n              color: '#F44336',\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            fontWeight: 700,\n            gutterBottom: true,\n            children: \"Thanh to\\xE1n th\\u1EA5t b\\u1EA1i!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), paymentResult.message && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 3\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              color: \"text.secondary\",\n              children: paymentResult.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 3,\n              backgroundColor: 'rgba(244, 67, 54, 0.1)',\n              borderRadius: 2,\n              maxWidth: 400,\n              mx: 'auto',\n              mb: 4\n            },\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: \"\\u0110\\xE3 x\\u1EA3y ra l\\u1ED7i trong qu\\xE1 tr\\xECnh thanh to\\xE1n. Vui l\\xF2ng th\\u1EED l\\u1EA1i ho\\u1EB7c li\\xEAn h\\u1EC7 h\\u1ED7 tr\\u1EE3 kh\\xE1ch h\\xE0ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            my: 3\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), !isVerifying && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            mb: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            variant: \"determinate\",\n            value: countDown / 5 * 100,\n            size: 24,\n            sx: {\n              mr: 2,\n              color: '#0F52BA'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            color: \"text.secondary\",\n            children: [\"B\\u1EA1n s\\u1EBD \\u0111\\u01B0\\u1EE3c chuy\\u1EC3n \\u0111\\u1EBFn trang ch\\u1EE7 trong \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: countDown\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 56\n            }, this), \" gi\\xE2y\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 2,\n            justifyContent: 'center',\n            flexWrap: 'wrap'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            startIcon: /*#__PURE__*/_jsxDEV(HomeIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 26\n            }, this),\n            onClick: () => navigate('/'),\n            sx: {\n              backgroundColor: '#0F52BA',\n              '&:hover': {\n                backgroundColor: '#0A3C8A'\n              },\n              px: 3,\n              py: 1.2\n            },\n            children: \"V\\u1EC1 trang ch\\u1EE7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), paymentResult.status === 'paid' && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            startIcon: /*#__PURE__*/_jsxDEV(ReceiptLongIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 28\n            }, this),\n            component: Link,\n            to: \"/order-history\",\n            sx: {\n              borderColor: '#0F52BA',\n              color: '#0F52BA',\n              '&:hover': {\n                borderColor: '#0A3C8A',\n                backgroundColor: 'rgba(15, 82, 186, 0.04)'\n              },\n              px: 3,\n              py: 1.2\n            },\n            children: \"Xem \\u0111\\u01A1n h\\xE0ng\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n};\n_s(PaymentResult, \"AdJ5l4ThHOQ9XuvxGPNR6vR7sQY=\", false, function () {\n  return [useLocation, useNavigate, useDispatch, useSelector];\n});\n_c = PaymentResult;\nexport default PaymentResult;\nvar _c;\n$RefreshReg$(_c, \"PaymentResult\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Link","useDispatch","useSelector","toast","resetPayment","checkPaymentStatus","cancelPaymentPolling","motion","Box","Container","Typography","Button","Paper","CircularProgress","Divider","CheckCircleOutlineIcon","CancelOutlinedIcon","HomeIcon","ReceiptLongIcon","PaymentResult","location","navigate","dispatch","token","state","auth","countDown","setCountDown","isVerifying","setIsVerifying","paymentResult","setPaymentResult","status","orderId","message","query","URLSearchParams","search","queryStatus","get","queryOrderId","queryMessage","locationState","payosStatus","paymentCompleted","sessionStorage","getItem","console","log","success","replace","getStatusInfo","finalStatus","setItem","resultAction","fulfilled","match","data","payload","paymentStatus","payment","error","timer","setInterval","prev","clearInterval","handleBeforeUnload","window","addEventListener","removeEventListener","py","opacity","y","duration","p","xs","md","borderRadius","textAlign","boxShadow","display","flexDirection","alignItems","mb","color","scale","type","stiffness","damping","fontSize","backgroundColor","maxWidth","mx","my","justifyContent","mr","gap","flexWrap","px","borderColor"],"sources":["D:/SU25/SDN302 - HOANNN/Shopii-Template/front-end/src/pages/PaymentResult/PaymentResult.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate, Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { resetPayment, checkPaymentStatus, cancelPaymentPolling } from '../../features/payment/paymentSlice';\nimport { motion } from 'framer-motion';\nimport { \n  Box, \n  Container, \n  Typography, \n  Button, \n  Paper, \n  CircularProgress,\n  Divider\n} from \"@mui/material\";\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\nimport CancelOutlinedIcon from '@mui/icons-material/CancelOutlined';\nimport HomeIcon from '@mui/icons-material/Home';\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong';\n\nconst PaymentResult = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { token } = useSelector((state) => state.auth);\n  const [countDown, setCountDown] = useState(5);\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [paymentResult, setPaymentResult] = useState({\n    status: '',\n    orderId: '',\n    message: ''\n  });\n  \n  // Get query parameters from URL\n  const query = new URLSearchParams(location.search);\n  const queryStatus = query.get('status');\n  const queryOrderId = query.get('orderId') || query.get('orderCode');\n  const queryMessage = query.get('message');\n  const locationState = location.state || {};\n\n  // Check PayOS specific status\n  const payosStatus = query.get('status'); // PAID, CANCELLED, etc.\n  \n  // Check if payment was already completed via sessionStorage\n  useEffect(() => {\n    const orderId = locationState.orderId || queryOrderId;\n    if (orderId) {\n      const paymentCompleted = sessionStorage.getItem(`payment_${orderId}_completed`);\n      if (paymentCompleted === 'true') {\n        console.log(`Payment ${orderId} was already completed, redirecting to home`);\n        dispatch(cancelPaymentPolling());\n        toast.success(\"Payment was already completed successfully!\");\n        navigate('/', { replace: true });\n      }\n    }\n  }, [locationState.orderId, queryOrderId, dispatch, navigate]);\n  \n  // Ưu tiên sử dụng location state trước, sau đó là query params\n  useEffect(() => {\n    const getStatusInfo = async () => {\n      setIsVerifying(true);\n      \n      // Sử dụng thông tin từ URL hoặc state\n      let finalStatus = locationState.status || queryStatus;\n      const orderId = locationState.orderId || queryOrderId;\n      const message = locationState.message || queryMessage;\n      \n      console.log('Initial payment status info:', { finalStatus, orderId, payosStatus });\n      \n      // Check if payment is already completed\n      if (orderId) {\n        const paymentCompleted = sessionStorage.getItem(`payment_${orderId}_completed`);\n        if (paymentCompleted === 'true') {\n          console.log(`Payment ${orderId} is already marked as completed`);\n          finalStatus = 'paid';\n          setIsVerifying(false);\n          setPaymentResult({\n            status: 'paid',\n            orderId: orderId || '',\n            message: \"Payment was already completed successfully!\"\n          });\n          return;\n        }\n      }\n      \n      // Đối với PayOS, chúng ta cần dịch trạng thái\n      if (payosStatus === 'PAID' || payosStatus === 'SUCCESS' || payosStatus === '00') {\n        console.log('PayOS status indicates payment success');\n        finalStatus = 'paid';\n        \n        // Mark the payment as completed in session storage\n        if (orderId) {\n          sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n        }\n      } else if (payosStatus === 'CANCELLED' || payosStatus === 'FAILED') {\n        console.log('PayOS status indicates payment failure');\n        finalStatus = 'failed';\n      }\n      \n      // Nếu có orderId nhưng không có status rõ ràng, kiểm tra với API\n      if (orderId && (!finalStatus || finalStatus === 'pending')) {\n        console.log('Need to verify payment status with API for order:', orderId);\n        try {\n          if (token) {\n            const resultAction = await dispatch(checkPaymentStatus(orderId));\n            if (checkPaymentStatus.fulfilled.match(resultAction)) {\n              const data = resultAction.payload;\n              const paymentStatus = data?.payment?.status;\n              \n              console.log('API payment status check result:', paymentStatus);\n              \n              // Chỉ dựa vào trạng thái thanh toán\n              if (paymentStatus === 'paid') {\n                finalStatus = 'paid';\n                // Mark as completed\n                sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n              } else if (paymentStatus === 'failed') {\n                finalStatus = 'failed';\n              }\n            } else {\n              console.error('Failed to check payment status:', resultAction.error);\n            }\n          }\n        } catch (error) {\n          console.error('Error verifying payment:', error);\n        }\n      }\n      \n      console.log('Final payment status determined:', finalStatus);\n      \n      // Set final result\n      setPaymentResult({\n        status: finalStatus || 'unknown',\n        orderId: orderId || '',\n        message: message || ''\n      });\n      \n      setIsVerifying(false);\n    };\n    \n    getStatusInfo();\n    \n    // Reset payment state in Redux\n    dispatch(resetPayment());\n  }, [dispatch, locationState, queryStatus, queryOrderId, queryMessage, payosStatus, token]);\n\n  // Stop any polling immediately when landing on this page\n  useEffect(() => {\n    console.log('Payment result page loaded, ensuring all polling is stopped');\n    dispatch(cancelPaymentPolling());\n    \n    // Mark this payment as completed in sessionStorage\n    const orderId = locationState.orderId || queryOrderId;\n    if (orderId && paymentResult.status === 'paid') {\n      console.log(`Marking payment ${orderId} as completed`);\n      sessionStorage.setItem(`payment_${orderId}_completed`, 'true');\n    }\n  }, [dispatch, locationState.orderId, queryOrderId, paymentResult.status]);\n  \n  // Show toast and start countdown after verification\n  useEffect(() => {\n    if (isVerifying) return;\n    \n    // Show toast based on status\n    if (paymentResult.status === 'paid') {\n      toast.success('Thanh toán thành công!');\n    } else if (paymentResult.status === 'failed') {\n      toast.error('Thanh toán thất bại!');\n    } else {\n      toast.error(paymentResult.message || 'Đã xảy ra lỗi trong quá trình thanh toán.');\n    }\n    \n    let timer;\n    // Start countdown to redirect to home\n    if (countDown > 0) {\n      timer = setInterval(() => {\n        setCountDown(prev => {\n          if (prev <= 1) {\n            clearInterval(timer);\n            navigate('/');\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n    }\n    \n    // Cleanup function to clear the timer when component unmounts\n    return () => {\n      if (timer) {\n        console.log('Clearing redirect timer');\n        clearInterval(timer);\n      }\n    };\n  }, [isVerifying, paymentResult, navigate, countDown]);\n  \n  // Add another effect to force navigation when leaving the page\n  useEffect(() => {\n    const handleBeforeUnload = () => {\n      // Force cancel any pending operations\n      dispatch(resetPayment());\n    };\n    \n    window.addEventListener('beforeunload', handleBeforeUnload);\n    \n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      dispatch(resetPayment());\n    };\n  }, [dispatch]);\n  \n  return (\n    <Container maxWidth=\"md\" sx={{ py: 6 }}>\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n      >\n        <Paper \n          elevation={3} \n          sx={{ \n            p: { xs: 4, md: 6 }, \n            borderRadius: 2,\n            textAlign: 'center',\n            boxShadow: '0 10px 30px rgba(0,0,0,0.1)'\n          }}\n        >\n          {isVerifying ? (\n            <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', py: 4 }}>\n              <CircularProgress size={60} sx={{ mb: 3, color: '#0F52BA' }} />\n              <Typography variant=\"h5\" fontWeight={600}>\n                Đang xác minh thanh toán...\n              </Typography>\n            </Box>\n          ) : paymentResult.status === 'paid' ? (\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ \n                type: \"spring\",\n                stiffness: 200,\n                damping: 15\n              }}\n            >\n              <CheckCircleOutlineIcon \n                sx={{ \n                  fontSize: 100, \n                  color: '#4CAF50',\n                  mb: 2\n                }} \n              />\n              <Typography variant=\"h4\" fontWeight={700} gutterBottom>\n                Thanh toán thành công!\n              </Typography>\n              {paymentResult.orderId && (\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"body1\" color=\"text.secondary\" gutterBottom>\n                    Mã đơn hàng:\n                  </Typography>\n                  <Typography variant=\"h6\" fontWeight={600} sx={{ color: '#0F52BA' }}>\n                    {paymentResult.orderId}\n                  </Typography>\n                </Box>\n              )}\n              <Box sx={{ \n                p: 3, \n                backgroundColor: 'rgba(76, 175, 80, 0.1)', \n                borderRadius: 2,\n                maxWidth: 400,\n                mx: 'auto',\n                mb: 4\n              }}>\n                <Typography variant=\"body1\">\n                  Cảm ơn bạn đã mua hàng! Đơn hàng của bạn đã được xử lý thành công.\n                </Typography>\n              </Box>\n            </motion.div>\n          ) : (\n            <motion.div\n              initial={{ scale: 0.8 }}\n              animate={{ scale: 1 }}\n              transition={{ \n                type: \"spring\",\n                stiffness: 200,\n                damping: 15\n              }}\n            >\n              <CancelOutlinedIcon \n                sx={{ \n                  fontSize: 100, \n                  color: '#F44336',\n                  mb: 2\n                }} \n              />\n              <Typography variant=\"h4\" fontWeight={700} gutterBottom>\n                Thanh toán thất bại!\n              </Typography>\n              {paymentResult.message && (\n                <Box sx={{ mb: 3 }}>\n                  <Typography variant=\"body1\" color=\"text.secondary\">\n                    {paymentResult.message}\n                  </Typography>\n                </Box>\n              )}\n              <Box sx={{ \n                p: 3, \n                backgroundColor: 'rgba(244, 67, 54, 0.1)', \n                borderRadius: 2,\n                maxWidth: 400,\n                mx: 'auto',\n                mb: 4\n              }}>\n                <Typography variant=\"body1\">\n                  Đã xảy ra lỗi trong quá trình thanh toán. Vui lòng thử lại hoặc liên hệ hỗ trợ khách hàng.\n                </Typography>\n              </Box>\n            </motion.div>\n          )}\n          \n          <Divider sx={{ my: 3 }} />\n          \n          {!isVerifying && (\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 4 }}>\n              <CircularProgress \n                variant=\"determinate\" \n                value={(countDown / 5) * 100} \n                size={24} \n                sx={{ mr: 2, color: '#0F52BA' }} \n              />\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                Bạn sẽ được chuyển đến trang chủ trong <strong>{countDown}</strong> giây\n              </Typography>\n            </Box>\n          )}\n          \n          <Box sx={{ display: 'flex', gap: 2, justifyContent: 'center', flexWrap: 'wrap' }}>\n            <Button\n              variant=\"contained\"\n              startIcon={<HomeIcon />}\n              onClick={() => navigate('/')}\n              sx={{ \n                backgroundColor: '#0F52BA',\n                '&:hover': {\n                  backgroundColor: '#0A3C8A',\n                },\n                px: 3,\n                py: 1.2\n              }}\n            >\n              Về trang chủ\n            </Button>\n            \n            {paymentResult.status === 'paid' && (\n              <Button\n                variant=\"outlined\"\n                startIcon={<ReceiptLongIcon />}\n                component={Link}\n                to=\"/order-history\"\n                sx={{ \n                  borderColor: '#0F52BA',\n                  color: '#0F52BA',\n                  '&:hover': {\n                    borderColor: '#0A3C8A',\n                    backgroundColor: 'rgba(15, 82, 186, 0.04)',\n                  },\n                  px: 3,\n                  py: 1.2\n                }}\n              >\n                Xem đơn hàng\n              </Button>\n            )}\n          </Box>\n        </Paper>\n      </motion.div>\n    </Container>\n  );\n};\n\nexport default PaymentResult; "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}